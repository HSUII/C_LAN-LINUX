## TCP/IP 기초

### *TCP/IP : 인터넷 네트워크 핵심 프로토콜*
***

- TCP/IP는 패킷 교환 방식을 관장하는 통신 규약이다. 
- **소켓(SOCKET)?**
  : 두프로그램이 네트워크를 통해 서로 통신을 수행할 수 있도록 양쪽에 생성되는 링크 단자 
  - 응용 프로그램에서 TCP/IP를 이용하는 창구 역할을 하며 응용프로그램과 소켓 사이의 인터페이스 역할
 
 - **소켓흐름도** 
 
![image](https://user-images.githubusercontent.com/87008955/126598958-dc006d64-d43c-4529-853e-0666222eb421.png)

출처: < https://helloworld-88.tistory.com/215 >

  - 서버
    - SOCKET()함수를 이용하여 소켓 생성
    - bind()함수로 ip와 port 번호 설정
    - listen() 함수로 클라이언트의 접근 요청에 수신 대기열을만들어 몇개의 클라이언트를 대기시킬지 결정
    - accept()함수를 이용하여 클리어어느와의 연결을 기다림
  - 클라이언트
    - socket()함수로 가장 먼저 소켓을 엶
    - connect() 함수를 이용하여 통신 할 서버의 설정된 ip와 port 번호에 통신을 시도 
    - 통신을 시도시, 서버가 accept()함수를 이용하여 클라이언트의 socket descriptor를 반환
    - 성공후 클라이언트와 서버가 서로 read(), write()를 하며 통신 

***
### *파일 디스크립터(file discripter)*
  :파일을 시스템 프로그래밍 차원에서, 시스템 콜 함수를 통해 바이트 단위의 입출력으로 다룰 수 있게하고, 커널 내부의 자료구조들과의 연결 통로 역할을 해주는 것 
  
  ![image](https://user-images.githubusercontent.com/87008955/126599414-a32687ba-5a06-4a42-9a59-81b1fb260ff6.png)
  
  - 유닉스 시스템에서 모든 것은 파일이라고한다. 일반적인 정규파일에서부터 디렉토리, 소켓, 파이프, 디바이스 모든 객체들이 파일로써 관리된다. 프로세스가 파일들을 접근할 떄 파일 디스크립터라는 개념을 이용한다. 

  - 파일 디스크립터는 '0'이 아닌 양수인 정수값이다. 그렇기에 밑에 사진과 같이 bind, listen할때 음수값이 나오면 통신에러라고 판단한다.

  ![image](https://user-images.githubusercontent.com/87008955/126599861-0d149d97-a126-4b53-96fc-b4ffd64c608a.png)
  
  - 프로세스가 실행중인 파일을 open하면 커널은 해당 프로세스의 파일 디스크립터 숫자 중에 사용하지 않는 가장 작은 값을 할당해준다. 그 다음 프로세스가 열려있는 파일에 시스템 콜을 이용해서 FD 값으 이용해 지칭할 수 있다. 

  ![image](https://user-images.githubusercontent.com/87008955/126600041-3f20967f-abd9-4e55-a12c-5af8dd26d0d1.png)
  
  - 파일 디스크립터가 단순히 숫자인 이유는 프로세스가 유지하고 있는 FD 테이블의 인덱스이기 때문이다. FD 3번이라니는 의미는 FD 테이블의 3번항목이 가리키는 파일이라는 의미이다. 프로세스는 이런 FD 테이블과 파일 테이블의 정보를 직접 고칠 수 없으며, 반드시 커널을 통해서 수정을 해야한다. 


![image](https://user-images.githubusercontent.com/87008955/126600105-f6783fbb-760a-4ffb-9000-3b84dce8aca3.png)



  
